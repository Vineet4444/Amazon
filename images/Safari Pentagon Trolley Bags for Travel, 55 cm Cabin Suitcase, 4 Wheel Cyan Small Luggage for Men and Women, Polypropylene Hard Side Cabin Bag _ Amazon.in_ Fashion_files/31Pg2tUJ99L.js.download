'use strict';mix_d("LearnMoreWithAlexaInsightsCards__learn-more-with-alexa-insights-desktop:learn-more-with-alexa-insights-desktop__Eap2rrOg","exports tslib @c/scoped-dom @c/browser-operations @c/aui-modal @c/logger @c/remote-operations".split(" "),function(C,e,I,J,K,L,M){function t(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var u=t(I),N=t(J),O=t(K),g=t(L),P=t(M),x;(function(a){a.reviewAspects="PRODUCT_REVIEW_ASPECTS";a.productSummary="PRODUCT_OVERVIEW_OFFLINE";a.webReviews="PRODUCT_WEB_REVIEWS";
a.helpfulSentences="PRODUCT_HIGHLIGHTS"})(x||(x={}));Object.keys(x).map(function(a){return x[a]});var p;(function(a){a.InsightsIncorrect="InsightsIncorrect";a.InsightsAreNotSpecificToTheProduct="InsightsAreNotSpecificToTheProduct";a.InsightsSourcesAreNotTrustworthy="InsightsSourcesAreNotTrustworthy";a.InsightsContradictEachOther="InsightsContradictEachOther";a.SomethingElse="SomethingElse"})(p||(p={}));[{enumReason:p.InsightsIncorrect,localizedReason:"Insights are incorrect"},{enumReason:p.InsightsAreNotSpecificToTheProduct,
localizedReason:"Insights are not specific to the product"},{enumReason:p.InsightsSourcesAreNotTrustworthy,localizedReason:"Insight sources are not trustworthy"},{enumReason:p.InsightsContradictEachOther,localizedReason:"Insights contradict each other"},{enumReason:p.SomethingElse,localizedReason:"Something else"}];var v;(function(a){a.reviewHighlights="reviewHighlights";a.questionsAndAnswersInsights="questionsAndAnswersInsights";a.helpfulSentences="helpfulSentences";a.webInfo="webInfo";a.productSummary=
"productSummary"})(v||(v={}));[v.reviewHighlights,v.productSummary];[v.reviewHighlights];var D=function(a,b){void 0===b&&(b=u["default"].cardRoot);a=b.getElementsByClassName(a);return 0===a.length?void 0:a[0]},E=function(a,b){a?a.style.display="none":g["default"].log("Could not hide the feedback request message","ERROR");b?b.style.display="inline":g["default"].log("Could not show thank you message","ERROR")},z=function(a){return{feedbackId:a.idConfiguration.idGenerator()}},w=function(a,b){void 0===
b&&(b=u["default"].cardRoot);return b.getElementsByClassName(a)[0]},Q=function(a,b){void 0===b&&(b=u["default"].cardRoot);a=b.getElementsByClassName(a);if(0!==a.length)return a[0]},R=function(a,b,c,f){return e.__awaiter(void 0,void 0,void 0,function(){var h;return e.__generator(this,function(d){switch(d.label){case 0:h=z(f);if(!h.feedbackId)return g["default"].log("Couldn't extract asin or feedbackId from thumbs up button. "+JSON.stringify(h),"ERROR"),[2];d.label=1;case 1:return d.trys.push([1,3,
,4]),[4,c.saveMainFeedback({metadata:A(f,h),mainFeedback:"THUMBS_UP"})];case 2:return d.sent(),[3,4];case 3:return d.sent(),g["default"].log("Couldn't save main feedback","ERROR"),[3,4];case 4:return E(a,b),[2]}})})},A=function(a,b){return{cxId:a.cxId,idType:a.idConfiguration.idType,id:b.feedbackId}},S=function(a,b,c){return e.__awaiter(void 0,void 0,void 0,function(){var f,h;return e.__generator(this,function(d){switch(d.label){case 0:f=z(c);if(!f.feedbackId)return g["default"].log("Couldn't extract feedbackId from thumbs down button. "+
JSON.stringify(f),"ERROR"),[2];d.label=1;case 1:return d.trys.push([1,3,,4]),[4,b.saveMainFeedback({metadata:A(c,f),mainFeedback:"THUMBS_DOWN"})];case 2:return d.sent(),[3,4];case 3:return d.sent(),g["default"].log("Couldn't save main feedback","ERROR"),[3,4];case 4:return[4,a.show()];case 5:return(h=d.sent())||g["default"].log("Couldn't show the modal","ERROR"),[2]}})})},T=function(a,b,c,f,h){return e.__awaiter(void 0,void 0,void 0,function(){var d,q;return e.__generator(this,function(m){switch(m.label){case 0:if(c.classList.contains("a-button-disabled"))return[2];
var n=z(h),k;a:{for(k=0;k<b.length;k++){var r=b[k].getElementsByClassName("a-accordion-row")[0];if("true"===r.getAttribute("aria-checked")){k=r.getAttribute("data-enumreason");break a}}g["default"].log("Couldn't retrieve selected feedback","ERROR");k=null}n=d={feedbackDataAttributes:n,selectedDetailedFeedback:k};if(!n.feedbackDataAttributes.feedbackId||!n.selectedDetailedFeedback)return g["default"].log("Couldn't extract detailed feedback/asin/feedbackId. "+JSON.stringify(d),"ERROR"),[2];m.label=
1;case 1:return m.trys.push([1,3,,4]),[4,f.saveDetailedFeedback({metadata:A(h,d.feedbackDataAttributes),detailFeedback:d.selectedDetailedFeedback})];case 2:return m.sent(),[3,4];case 3:return m.sent(),g["default"].log("Couldn't save detailed feedback","ERROR"),[3,4];case 4:return[4,a.hide()];case 5:return(q=m.sent())||g["default"].log("Couldn't hide the modal","ERROR"),[2]}})})},U=function(a){return e.__awaiter(void 0,void 0,void 0,function(){var b;return e.__generator(this,function(c){switch(c.label){case 0:return[4,
a.hide()];case 1:return(b=c.sent())||g["default"].log("Couldn't hide the modal","ERROR"),[2]}})})},V=function(a){return e.__awaiter(void 0,void 0,void 0,function(){var b,c;return e.__generator(this,function(f){a.classList.contains("a-button-disabled")&&(a.classList.toggle("a-button-disabled",!1),b=w("a-button-inner",a),c=w("a-button-input",b),c.removeAttribute("disabled"));return[2]})})},F;(function(a){a.thumbsUpHandler="thumbsUpHandler";a.thumbsDownHandler="thumbsDownHandler";a.feedbackSubmissionButtonHandler=
"feedbackSubmissionButtonHandler";a.feedbackCancelButtonHandler="feedbackCancelButtonHandler";a.feedbackSelectionHandler="feedbackSelectionHandler"})(F||(F={}));var B;(B||(B={})).click="click";var W=function(a){return e.__awaiter(void 0,void 0,void 0,function(){var b,c,f,h,d,q,m,n,k,r,G,y,H;return e.__generator(this,function(aa){b=a.style;c=Q(b.desktopDetailedFeedbackContent);if(!c)return[2];f=P["default"].setup();h={a11yOpenMessage:"detailed feedback",width:400,height:340};d="."+b.desktopDetailedFeedbackContent.replace(" ",
".");q=O["default"].create("detailed-feedback-modal",d,h);m=N["default"].setup();n=w(b.feedbackRequestDiv);k=w(b.hiddenElement);r=w(b.submitButton);G=c.getElementsByClassName("a-box-inner a-accordion-row-container");y=a.feedbackConfiguration;H={thumbsUpHandler:function(l){return R(n,k,f,y)},thumbsDownHandler:function(l){return S(q,f,y)},feedbackCancelButtonHandler:function(l){return U(q)},feedbackSubmissionButtonHandler:function(l){return T(q,G,r,f,y)},feedbackSelectionHandler:function(l){return V(r)}};
Object.entries(H).forEach(function(l){l=e.__read(l,2);return m.define(l[0],B.click,l[1])});q.once("afterHide",function(){return e.__awaiter(void 0,void 0,void 0,function(){return e.__generator(this,function(l){E(n,k);return[2]})})});return[2]})})},X=function(a){return function(){var b=D("_learn-more-with-alexa-insights-desktop_style_feedbackWidgetDataElement__2XqIi");b={asin:b?b.getAttribute("data-asin"):null,feedbackId:b?b.getAttribute("data-feedback-id"):null};if(b.asin&&b.feedbackId)return a+"_DETAIL_"+
b.asin+"_OVERALL_"+b.feedbackId;g["default"].log("Couldn't extract asin or feedback id: "+JSON.stringify(b),"ERROR")}},Y=function(a){return e.__awaiter(void 0,void 0,void 0,function(){var b;return e.__generator(this,function(c){switch(c.label){case 0:return(b=D(a.desktopDetailedFeedbackContent))?[4,W({feedbackConfiguration:{cxId:"ALEXA_INSIGHTS",idConfiguration:{idGenerator:X("DESKTOP"),idType:"P_P_A_CX_ID"}},style:a})]:[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})},Z={hiddenElement:"_learn-more-with-alexa-insights-desktop_style_hidden-element__1vCJk",
mobileDetailedFeedbackContent:"_learn-more-with-alexa-insights-desktop_style_mobile-detailed-feedback-content__1m5Sp",desktopDetailedFeedbackContent:"_learn-more-with-alexa-insights-desktop_style_desktop-detailed-feedback-content__2K0y0 aok-hidden",desktopFeedbackSectionMargin:"_learn-more-with-alexa-insights-desktop_style_desktop-feedback-section-margin__1FpSS",feedbackRequestDiv:"_learn-more-with-alexa-insights-desktop_style_feedback-request-div__33Ohx",feedbackDesktopAccordian:"_learn-more-with-alexa-insights-desktop_style_feedback-desktop-accordian__3qcbu",
mobileFeedbackRequestButton:"_learn-more-with-alexa-insights-desktop_style_mobile-feedback-request-button__1UrjJ",feedbackButtons:"_learn-more-with-alexa-insights-desktop_style_feedback-buttons__3H5Cp",desktopFeedbackButton:"_learn-more-with-alexa-insights-desktop_style_desktop-feedback-button__zrFN0",feedbackMessage:"_learn-more-with-alexa-insights-desktop_style_feedback-message__M5Z3f",mobileFeedbackButton:"_learn-more-with-alexa-insights-desktop_style_mobile-feedback-button__5Ajnh",feedbackButtonGroup:"_learn-more-with-alexa-insights-desktop_style_feedback-button-group__29YIy",
mobileFeedbackSpan:"_learn-more-with-alexa-insights-desktop_style_mobile-feedback-span__GPeY_",desktopFeedbackAccordianRow:"_learn-more-with-alexa-insights-desktop_style_desktop-feedback-accordian-row__aFHDu",desktopModalHeader:"_learn-more-with-alexa-insights-desktop_style_desktop-modal-header__1eKu5",iconRightSpacing:"_learn-more-with-alexa-insights-desktop_style_icon-right-spacing__oSq1y",mobileFeedbackSection:"_learn-more-with-alexa-insights-desktop_style_mobile-feedback-section__2urU4",mobileFeedbackSubmitButton:"_learn-more-with-alexa-insights-desktop_style_mobile-feedback-submit-button__3JG_l",
mobileButton:"_learn-more-with-alexa-insights-desktop_style_mobile-button__3JPJ_ aok-float-right",mobileBottomSheetFooter:"_learn-more-with-alexa-insights-desktop_style_mobile-bottom-sheet-footer__2Him1",mobileBottomSheetHeading:"_learn-more-with-alexa-insights-desktop_style_mobile-bottom-sheet-heading__1DaZA",accordianContainerRow:"_learn-more-with-alexa-insights-desktop_style_accordian-container-row__3B2iZ",accordianFirstRow:"_learn-more-with-alexa-insights-desktop_style_accordian-first-row__kfMFX",
accordianLastRow:"_learn-more-with-alexa-insights-desktop_style_accordian-last-row__1HDpX",whiteButtonColor:"_learn-more-with-alexa-insights-desktop_style_white-button-color__30AIh",accordianRowContent:"_learn-more-with-alexa-insights-desktop_style_accordian-row-content__3Ung1",submitButton:"_learn-more-with-alexa-insights-desktop_style_submit-button__1oJv-",mobileButtonEnabledColour:"_learn-more-with-alexa-insights-desktop_style_mobile-button-enabled-colour__1uG82",rootContainerTwoElements:"_learn-more-with-alexa-insights-desktop_style_rootContainerTwoElements__2_5lq",
rootContainerThreeElements:"_learn-more-with-alexa-insights-desktop_style_rootContainerThreeElements__3_40X",contentContainer:"_learn-more-with-alexa-insights-desktop_style_contentContainer__3ngAH",subContentContainerTwoElements:"_learn-more-with-alexa-insights-desktop_style_subContentContainerTwoElements__1Is2M",subContentContainerThreeElements:"_learn-more-with-alexa-insights-desktop_style_subContentContainerThreeElements__2n9qE",productInformationContainer:"_learn-more-with-alexa-insights-desktop_style_productInformationContainer__wT8Cx"};
C._operationNames=["saveMainFeedback","saveDetailedFeedback"];C.card=function(){return e.__awaiter(void 0,void 0,void 0,function(){return e.__generator(this,function(a){switch(a.label){case 0:a=u["default"].cardRoot.getElementsByClassName("_learn-more-with-alexa-insights-desktop_style_highlightMentionsAmount__2cg_x");for(var b=0,c=0;c<a.length;c++)b=Math.max(b,a[c].innerText.length);a=7>b?"_learn-more-with-alexa-insights-desktop_style_shortHighlightRating__YSQNm":7===b?"_learn-more-with-alexa-insights-desktop_style_mediumHighlightRating__O-yLA":
"_learn-more-with-alexa-insights-desktop_style_longHighlightRating___uPFl";b=u["default"].cardRoot.getElementsByClassName("_learn-more-with-alexa-insights-desktop_style_highlightRating__2u_qB");for(c=0;c<b.length;c++)b[c].classList.add(a);return[4,Y(Z)];case 1:return a.sent(),[2]}})})}});
