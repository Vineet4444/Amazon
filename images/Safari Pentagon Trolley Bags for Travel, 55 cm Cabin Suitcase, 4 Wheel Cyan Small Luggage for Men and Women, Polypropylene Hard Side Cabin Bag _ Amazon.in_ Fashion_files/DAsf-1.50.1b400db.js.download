!function(){var e,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequire2640;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,a,i,o){try{let r=null;if(window.XMLHttpRequest?r=new XMLHttpRequest:o(),r){if(r.onreadystatechange=()=>{i(r)},r.open(t,e,!0),null!==a)for(const e in a)r.setRequestHeader(e,a[e]);r.send(n)}else o()}catch(e){o()}}null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequire2640=i),i.register("a1rh1",(function(e,t){"use strict";function n(e,t,n,a){var i=[e,t,n];return a&&i.push(a),i}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.addCsmTag=e.exports.sendCsmCounter=e.exports.sendCsmLatencyMetric=void 0,e.exports.sendCsmLatencyMetric=function(e,t,a,i,o){var r;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(r||(r={})),r.hasOwnProperty(e)){var s=r[e].toString(),d=i?i+":":"";"function"==typeof window[s]&&(window[s].apply(this,n(e,"adplacements:"+d+t.replace(/_/g,":"),{wb:1},o)),a&&window[s].apply(this,n(e,"adplacements:"+d+a,{wb:1},o)))}},e.exports.sendCsmCounter=function(e,t,n,a){if(window.ue&&"function"==typeof window.ue.count){var i="adplacements:"+n;if(e&&(i+=":"+e.replace(/_/g,":")),window.ue.count(i,a),t){var o="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(o,a)}}},e.exports.addCsmTag=function(e,t,n,a){if(window.ue&&window.ue.tag){if(t){var i=e+":"+t.replace(/_/g,":")+(a?":"+a:"");window.ue.tag(i)}if(n){var o=e+":"+n+(a?":"+a:"");window.ue.tag(o)}t||n||window.ue.tag(e+(a?":"+a:""))}}})),i.register("iMV0g",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.events=e.exports.latency=void 0;var n=i("ej7sS"),a=i("h1Sm4");e.exports.latency=function(e){return new n.CsaLatency(e)},e.exports.events=function(){return new a.CsaEvents}})),i.register("ej7sS",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaLatency=void 0;var n=i("1Fd0t"),a=function(e){var t=this;if(this.mark=function(e,a){if(t.latencyPlugin)try{t.latencyPlugin("mark",e,a)}catch(e){(0,n.logError)("Error with 'markCsaLatencyMetric' CSA",e)}},window.csa)try{this.latencyPlugin=window.csa("Content",{element:e})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaLatency=a})),i.register("1Fd0t",(function(e,t){"use strict";var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),a=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return a(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.logError=void 0;var r=o(i("a1rh1")),s="ERROR";e.exports.logError=function(e,t){var n=t||new Error(e);console.error(e,t),r.sendCsmCounter("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:s,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}})),i.register("h1Sm4",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaEvents=void 0;var n=i("1Fd0t"),a=function(){var e=this;if(this.log=function(t,a,i){if(e.events)try{e.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:t+":"+a+":"+i,metricValue:1},{ent:"all"})}catch(e){(0,n.logError)("Error with 'logCsaEvent' CSA",e)}},this.setEntity=function(t){if(e.events)try{e.events("setEntity",{adCreativeMetaData:t})}catch(e){(0,n.logError)("Error with 'addCsaEntity' CSA",e)}},window.csa)try{this.events=window.csa("Events",{producerId:"adplacements"})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaEvents=a}));class s{logTrace(e,t){if(void 0!==this.traceId){let n;const a=(new Date).getTime();this.storedTrace.hasOwnProperty(e)||(this.storedTrace[e]=[]);t===Object(t)?n=Object.assign&&"function"==typeof Object.assign?Object.assign({},t):JSON.parse(JSON.stringify(t)):(n='{ "'+e+'":"'+t+'"}',n=JSON.parse(n)),n.timeStamp=a,n.timeSinceAdStart=a-this.adStartTime,this.storedTrace[e].push(n)}}constructor(e,t){o(this,"traceId",void 0),o(this,"adStartTime",void 0),o(this,"storedTrace",void 0),o(this,"allData",void 0),this.traceId=e,this.adStartTime=t,this.storedTrace={};void 0!==e&&(()=>{const e=()=>{const e=()=>{console.log("failed to send request to /gp/adbarplus")},t=t=>{4===t.readyState&&200!==t.status&&e()};if(!(e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0})(this.storedTrace)){r("/gp/adbarplus?traceId="+this.traceId+"&systemName=browser","POST",JSON.stringify(this.storedTrace),{"Content-Type":"application/x-www-form-urlencoded"},t,e);for(const e in this.storedTrace)this.storedTrace.hasOwnProperty(e)&&delete this.storedTrace[e]}},t=(e,t)=>()=>e.apply(t),n=()=>{e()},a=()=>{e(),window.setInterval(t(n,this),3e3)};"loading"!==document.readyState?t(a,this)():window.addEventListener("load",t(a,this))})()}}var d,l=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),c="$1",u="$14";d=function(){return document};var p="data-val";function m(e){if("string"!=typeof e||""===e)return"";var t=d().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(p)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var n=t.getAttribute(p);return"string"!=typeof n?"":n}e=function(e,t,n){return m([e,n,t].join("_"))};const h=t=>{if(!("pageType"in t)||!("subPageType"in t)||!("slotName"in t))return"";try{return e(t.pageType,t.subPageType,t.slotName)}catch(e){return""}},f=()=>window.P&&window.P.AUI_BUILD_DATE,w=(e,t,n)=>{var a;return f()&&"function"==typeof(null===window||void 0===window||null===(a=window.P)||void 0===a?void 0:a.guardError)?P.guardError("APE-SafeFrame",e):(...a)=>{try{e(...a)}catch(e){"function"==typeof t&&n&&t(n,e)}}},g=(e,t)=>{if(e&&t)for(const n in t)e.style[n]=t[n];return e},v={1027:"Sponsored Display DRA"},E=(e,t)=>(e=>"V"===e)(e)&&!v.hasOwnProperty(t),b={1:"Enabled",0:"NotEnabled","-1":"Unknown"},S=e=>(e=>{let t,n="";const a=e.length;for(let i=0;i<a;i++)t=e[i],n+=String.fromCodePoint(t>251&&t<254&&i+5<a?1073741824*(t-252)+(e[++i]-128<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>247&&t<252&&i+4<a?(t-248<<24)+(e[++i]-128<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>239&&t<248&&i+3<a?(t-240<<18)+(e[++i]-128<<12)+(e[++i]-128<<6)+e[++i]-128:t>223&&t<240&&i+2<a?(t-224<<12)+(e[++i]-128<<6)+e[++i]-128:t>191&&t<224&&i+1<a?(t-192<<6)+e[++i]-128:t);return n})(((e,t)=>{const n=e.replace(/[^A-Za-z0-9+/]/g,""),a=n.length,i=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,o=new Uint8Array(i);let r,s,d=0,l=0;for(let e=0;e<a;e++)if(s=3&e,d|=((c=n.charCodeAt(e))>64&&c<91?c-65:c>96&&c<123?c-71:c>47&&c<58?c+4:43===c?62:47===c?63:0)<<6*(3-s),3===s||a-e==1){for(r=0;r<3&&l<i;)o[l]=d>>>(16>>>r&24)&255,r++,l++;d=0}var c;return o})(e));var y,I,T,R;(I=y||(y={})).START="adload_start",I.CALLBACK="adload_delayload",I.IFRAME_CREATED="adload_iframecreated",(R=T||(T={})).SF_LIBRARY="sflibrary_",R.SF_HTML="sfhtml_";const A={1:"abpstatus_enabled",0:"abpstatus_notenabled","-1":"abpstatus_unknown"};var D,_,O;function L(e){return window[e]&&"object"==typeof window[e].adDetails?window[e].adDetails:null}(D||(D={})).VERSION="sfversion_",(O=_||(_={})).LOGGING_FAILED="resourceTimingData_LoggingFailed",O.LOGGING_SUCCESSFUL="resourceTimingData_LoggingSuccessful",O.DEPENDENCIES_NOT_MET="resourceTimingData_DependenciesNotMet",O.DEPENDENCIES_MET="resourceTimingData_DependenciesMet";const C=e=>{e.fallbackStaticAdClickUrl&&((e=>{let t="";return e&&(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]),0!==t.length})(e.fallbackStaticAdClickUrl)||(e.fallbackStaticAdClickUrl=window.location.protocol+"//"+window.location.host+e.fallbackStaticAdClickUrl))},N={};function M(e,t,n){e&&e.id&&!N[e.id]&&window.P&&f()&&window.P.when("gw-video-orchestrator").execute((a=>{a.subscribe(e,t,n),N[e.id]=!0}))}const k=()=>window.innerHeight||document.documentElement.clientHeight,x=()=>window.innerWidth||document.documentElement.clientWidth,F=e=>e.getBoundingClientRect().top-k(),H=e=>{const t={atf:B(e)};if(!e||!window||!document)return t;const n=W(),a=G(e),i=Q(e);return{atf:B(e),geom:{win:n,self:a,exp:i},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}}},B=e=>{if(!e)return"unknown";const t=function(e){if(!window||!(null===document||void 0===document?void 0:document.body))return null;const t=J(e,null),n=k(),a=x(),i=document.body.getBoundingClientRect(),o=Math.max(0,Math.min(i.left+a,t.r)-t.l),r=Math.max(0,Math.min(i.top+n,t.b)-t.t),s=o*r/(t.h*Math.min(t.w,a));return Number(Math.min(1,Math.max(0,s)).toFixed(2))}(e);return null==t?"unknown":t>=.5};const z=e=>{if(!window||!document)return null;const t=U(e),n=W(),a=G(null,t);return{atf:"unknown",geom:{win:n,self:a,exp:Q(null,t)},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}}},j=(e,t)=>{const n=J(e),a=J(t),i=x(),o=k();return n&&a&&(Math.abs(n.t-a.b)<o||Math.abs(n.b-a.t)<o)&&(Math.abs(n.l-a.r)<i||Math.abs(n.r-a.l)<i)},U=e=>{const t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),a=n+e.adHeight,i=t.left-(window.scrollX-e.originalScrollX);return{top:n,bottom:a,left:i,right:i+e.adWidth,width:e.adWidth,height:e.adHeight}},V=(e,t,n)=>{let a=0;return"visible"!==document.visibilityState?a:(a=e>0?n-e:t>0?Math.min(t,n):0,Math.min(a,t-e))},W=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=x(),a=k();return{t:e,l:t,w:n,h:a,b:e+a,r:t+n}},G=(e,t)=>{const n=J(e,t),a=q(n);return{t:n.t,l:n.l,r:n.r,b:n.b,w:n.w,h:n.h,z:n.z,xiv:a.xiv,yiv:a.yiv,iv:a.iv}},J=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:n.right,b:n.bottom,w:n.width,h:n.height,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN}},q=e=>{const t=x(),n=k(),a=Math.max(0,V(e.t,e.b,n)),i=Math.max(0,V(e.l,e.r,t)),o=a*i,r=e.h*Math.min(e.w,t);return 0!==r||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,a/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/r)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},Q=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:x()-n.right,b:k()-n.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>x()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>k()?1:0}};let Y=null;function K(e,t,n){const a=t=>{n.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};var i;e.options.expParams&&e.options.expParams.noVideoAutoplay?a(!1):(i=e.options.pageType)&&"gateway"===i.toLowerCase()?M(e.iframe,a,t):Y===e.options.arid?a(!0):null===Y&&function(e){const t=document.getElementsByTagName("video");for(let n=0;n<t.length;++n)if(!t[n].paused&&j(e,t[n]))return!1;return!0}(e.iframe)?(Y=e.options.arid,a(!0)):a(!1)}function X(){f()&&window.P&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect()})),Y=null}function $(e){var t;(t=e.iframe)&&window.P&&f()&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect(t)})),Y=e.options.arid}var Z,ee,te,ne,ae;(ee=Z||(Z={})).START="adload:start",ee.CALLBACK="adload:delayloadcallback",ee.IFRAME_CREATED="adload:iframecreated",(ne=te||(te={})).SF_LIBRARY="cache:sflibrary:",ne.SF_HTML="cache:sfhtml:",(ae||(ae={})).API="messenger:";const ie={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},oe={VERSION:"sfversion"};var re,se;(se=re||(re={})).NEXUS_CLIENT_NOT_DEFINED="ResourceTimingData.NexusClientNotDefined",se.LOGGING_FAILED="ResourceTimingData.LoggingFailed",se.LOGGING_SUCCESSFUL="ResourceTimingData.LoggingSuccessful",se.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet";const de={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"};var le,ce;function ue(e,t,n,a,i){let o;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(o||(o={})),!o.hasOwnProperty(e))return;const r=o[e].toString(),s=a?a+":":"";"function"==typeof window[r]&&(window[r].apply(this,he(e,"adplacements:"+s+t.replace(/_/g,":"),{wb:1},i)),n&&window[r].apply(this,he(e,"adplacements:"+s+n,{wb:1},i)))}function pe(e,t,n,a){if(window.ue&&"function"==typeof window.ue.count){let i="adplacements:"+n;if(e&&(i+=":"+e.replace(/_/g,":")),window.ue.count(i,a),t){const e="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(e,a)}}}function me(e,t,n,a){if(window.ue&&window.ue.tag){if(t){const n=e+":"+t.replace(/_/g,":")+(a?":"+a:"");window.ue.tag(n)}if(n){const t=e+":"+n+(a?":"+a:"");window.ue.tag(t)}t||n||window.ue.tag(e+(a?":"+a:""))}}function he(e,t,n,a){const i=[e,t,n];return a&&i.push(a),i}function fe(e,t,n){var a,i=n||{},o=i.noTrailing,r=void 0!==o&&o,s=i.noLeading,d=void 0!==s&&s,l=i.debounceMode,c=void 0===l?void 0:l,u=!1,p=0;function m(){a&&clearTimeout(a)}function h(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var s=this,l=Date.now()-p;function h(){p=Date.now(),t.apply(s,i)}function f(){a=void 0}u||(d||!c||a||h(),m(),void 0===c&&l>e?d?(p=Date.now(),r||(a=setTimeout(c?f:h,e))):h():!0!==r&&(a=setTimeout(c?f:h,void 0===c?e-l:e)))}return h.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;m(),u=!n},h}(ce=le||(le={})).PAGE_PRERENDER="pixelcondition:pageprerender",ce.AD_MISSING="pixelcondition:admissing";const we=new class{constructor(){o(this,"latencyPlugin",void 0),o(this,"events",void 0)}},ge=e=>{window.csa?we.latencyPlugin=window.csa("Content",{element:e}):console.log(window)},ve=(e,t)=>{try{we.latencyPlugin("mark",e,t)}catch(e){Ce("Error with initiating CSA",e)}},Ee=(e,t,n)=>{try{we.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+n,metricValue:1},{ent:"all"})}catch(e){Ce("Error with initiating CSA",e)}},be=e=>{try{we.events("setEntity",{adCreativeMetaData:e})}catch(e){Ce("Error with initiating CSA",e)}};class Se{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,timestamp:a}){ue(e.csmKey,n,t,e.csmMessage,null==a?void 0:a.getTime()),function(e,t,n){const a=function(e){return document.getElementById(function(e){return"ape_"+e+"_placement"}(e))}(t);a&&(ge(a),ve(e.csaKey,null==n?void 0:n.getTime()))}(e,n,a)}}const ye=()=>new Se,Ie="sfImpression",Te="LightAdImpression",Re=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),Ae=Re("bodyBegin","bb",Ie),De=(Re("bodyBegin","bb",Te),Re("bodyEnd","be"),Re("clickToATF","af")),_e=Re("criticalFeature","cf"),Oe=(Re("criticalFeature","cf",Ie),Re("criticalFeature","cf",Te),Re("loaded","ld"),Re("loaded","ld",Ie),Re("loaded","ld",Te),Re("viewablelatency:loaded","ld","viewablelatency")),Le="ERROR";function Ce(e,t){const n=t||new Error(e);console.error(e,t),pe("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:Le,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}const Ne=()=>{const e=window.location.hostname.split(".").pop();let t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se|pl|eg|be)$/.test(e)?t="eu":/^(jp|au|sg)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"},Me=(e,t)=>e.height===t.height&&e.width===t.width,Pe=(e,t,n)=>{if(!t||"object"!=typeof t)return!1;for(let a=0,i=t.length;a<i;a++)if(n(e,t[a]))return!0;return!1},ke=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window,xe=e=>e&&0===Object.keys(e).length&&e.constructor===Object;function Fe(e,t){const n=document.createElement("iframe");return n.name=JSON.stringify(e),n.id=t,n.height=Ge(e.size.height)||"250px",n.width=Ge(e.size.width)||"300px",n.className=e.iframeClass||"",n.setAttribute("frameborder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("data-arid",e.arid),n.style.cssText=e.iframeExtraStyle||"",n}const He=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"],Be=He.concat(["allow-same-origin"]),ze=(e,t,n)=>{const a=Fe(e,t);return a.srcdoc=decodeURIComponent(n),a.sandbox=He.join(" "),a},je=(e,t,n)=>{const a=Fe(e,t);return a.src=n,a.sandbox=Be.join(" "),a};function Ue(e){const t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")}function Ve(e,t,n){const a=document.getElementById(t[e].placementDivId),i=document.getElementById(t[e].wrapperDivId)||a,o=document.getElementById(t[e].iframeId);let r=n.resizePlacementWidthThreshold;const s=n.resizePlacementStyleAboveThreshold,d=n.resizePlacementStyleBelowThreshold;r=parseInt(r,10),i&&o&&r&&s&&d&&(i.offsetWidth<r?g(o,d):g(o,s))}function We(e,t,n,a,i,o){try{const r=document.getElementById(o[e].placementDivId),s=document.getElementById(o[e].wrapperDivId)||r,d=document.getElementById(o[e].iframeId);if(null===s||null===r||null===d)return;const l=Je(n),c=Je(t),u=!c&&!l,p=parseInt(t,10);let m=c?d.offsetWidth:p,h=l?d.offsetHeight:parseInt(n,10);const f=parseInt(a,10),w=e=>{u&&(h=Math.round(e*h/m)),m=Math.round(e)},g=0===s.offsetWidth?x():s.offsetWidth;f&&k()<x()?w(f):w(g),i&&i.adMap&&i.adMap[e]&&i.adMap[e].options&&i.adMap[e].options.slotSnapshot&&(i.adMap[e].options.slotSnapshot.adHeight=h,i.adMap[e].options.slotSnapshot.adWidth=m);const v=Ge(m),E=Ge(u?h:n);d.style.height=E,d.style.width=v;const b={width:v,height:E};s!==r&&(r.style.height=E,i.sendMessageToAd(e,"resizeCreativeWrapper",b)),"Detail_hero-quick-promo_Desktop"===o[e].slotId&&(pe(o[e].slotId,i.adMap[e].options.placementId,"OffsetLeft",d.offsetLeft),pe(o[e].slotId,i.adMap[e].options.placementId,"OffsetTop",d.offsetTop),pe(o[e].slotId,i.adMap[e].options.placementId,"OffsetWidth",d.offsetWidth),pe(o[e].slotId,i.adMap[e].options.placementId,"OffsetHeight",d.offsetHeight))}catch(t){Ce("Error resizing ad: "+o[e].slotId,t)}}function Ge(e){return!e||Je(e)||function(e){return e.length>2&&"px"===e.substring(e.length-2)}(e)?e:e+"px"}function Je(e){return e.length>1&&"%"===e.charAt(e.length-1)}function qe(e,t,n,a,i){const o="undefined"!=typeof P,r="undefined"!=typeof amznJQ,s="number"==typeof n&&0!==n?()=>{setTimeout(t,n)}:t,d=!!i&&JSON.parse(i);if(void 0===e)s();else if("windowOnLoad"===e)"complete"===document.readyState?s():window.addEventListener("load",s);else if("spATFEvent"===e)o?P.when("search-page-utilities").execute((e=>{window.searchPageUtils.afterEvent("spATFEvent",s)})):r?amznJQ.available("search-js-general",(()=>{window.SPUtils.afterEvent("spATFEvent",s)})):s();else if("aboveTheFold"===e)o?P.when("af").execute(s):r?amznJQ.onCompletion("amznJQ.AboveTheFold",s):s();else if("criticalFeature"===e)o?P.when("cf").execute(s):r?amznJQ.onCompletion("amznJQ.criticalFeature",s):s();else if("r2OnLoad"===e)o?P.when("r2Loaded").execute(s):r?amznJQ.onReady("r2Loaded",s):s();else if(e.match("[^:]+:.+")){const t=e.split(":"),n=t[0].split("."),a=t[1],i=t.length>2?t[2]:a;o?P.when(i,"A").execute(s):r&&n.length>1?amznJQ[n[1]](a,s):s()}else if(e.match(/^\d{1,4}px$/g))Qe(parseInt(e,10),s,a,d,((e,t)=>{const n=F(e);return e&&n<=t}));else{const t=/^reached(\d{1,5}px)FromTop$/g.exec(e);t?Qe(parseInt(t[1],10),s,a,d,((e,t)=>window.scrollY+k()>=t)):s()}}function Qe(e,t,n,a,i){let o=!1;const r=()=>{i(n,e)&&(t(),o=!0)},s=w(fe(20,(()=>{r(),o&&(window.removeEventListener("scroll",s),window.removeEventListener("resize",s))})));window.addEventListener("scroll",s),window.addEventListener("resize",s),a&&r()}const Ye=new class{customMessage(e,t,n,a,i){const o=this.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(n.indexOf(e)>-1&&o[e]?(pe(null,null,de.ALLOWLISTED+":"+e,1),o[e](t)):-1===n.indexOf(e)?(pe(null,null,de.NOT_ALLOWLISTED,1),pe(a,i,de.NOT_ALLOWLISTED,1)):Ce("Unrecognized custom message key: "+e))}catch(e){Ce("Custom Message Error",e)}}isElementInDOM(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}constructor(e,t,n){o(this,"adMap",void 0),o(this,"supportedCommands",void 0),o(this,"msgListeners",void 0),o(this,"getIframe",(e=>{var t;const n=this.adMap,a=n[e].options;if(xe(n)||xe(a))return null;const i="ape_"+a.slot+"_iframe";return n[e].iframe&&(n[e].iframe=n[e].iframe&&(null===(t=n[e].iframe)||void 0===t?void 0:t.innerHTML)?n[e].iframe:document.getElementById(i)),n[e].iframe})),o(this,"sendMessageToAd",((e,t,n)=>{const a=this.getIframe(e),i=a?a.contentWindow:null;if(i){const e={command:t,data:n};i.postMessage(e,"*")}})),o(this,"receiveMessage",(e=>{const t=e=>{for(const n in this.adMap){var t;if((null===(t=this.getIframe(n))||void 0===t?void 0:t.contentWindow)===e.source)return!0}return!1},n=this.adMap;if(xe(n))return;try{var a,i,o,r;if((null===(r=null==e||null===(a=e.data)||void 0===a||null===(i=a.message)||void 0===i||null===(o=i.id)||void 0===o?void 0:o.toLowerCase())||void 0===r?void 0:r.indexOf("mash"))>-1)throw"Received Mash message"}catch(e){return}const s=e.data,d=n[s.arid];try{const n=this.supportedCommands,a=((e,n)=>e&&e.options&&t(n))(d,e);if("object"!=typeof s.data||!n.hasOwnProperty(s.command))return;if(!a)throw"Invalid Message Origin: "+e.origin;const i=n[s.command];i&&(d.options.debug&&"undefined"!=typeof console&&console.log(e),i(d,s.data))}catch(t){let n="Problem with message: "+e.data;void 0!==s&&(n+=this.appendErrorDetails(s.arid)),Ce(n,t)}})),o(this,"appendErrorDetails",(e=>{const t=this.adMap;if(xe(t))return"";let n="";if(void 0!==t[e]){const a=t[e].options;void 0!==a.aanResponse&&(n=" Ad Details: "+JSON.stringify(a.aanResponse))}return n})),o(this,"registerCustomMessageListener",((e,t,n)=>{let a=!1;const i=this.msgListeners;try{if(!i[e]||"function"!=typeof i[e]||n)i[e]=t,a=!0;else{Ce("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}}catch(e){Ce("Error registering custom message listener",e)}return a})),o(this,"sendCustomMessage",((e,t)=>{const n=this.adMap,a={key:e,data:t};for(const e in n)this.sendMessageToAd(e,"customMessage",a)})),o(this,"sendCustomMessageToAd",((e,t,n)=>{const a={key:t,data:n};this.sendMessageToAd(e,"customMessage",a)})),o(this,"takeSnapshotOfSlotPosition",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||xe(t)||!n||xe(n))return;const a=this.getIframe(e);var i;this.adMap[e].options.slotSnapshot={initialBoundingRect:(i=a).getBoundingClientRect(),adHeight:i.offsetHeight,adWidth:i.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}})),o(this,"startPixelTracking",((e,t)=>{let n="prerender"!==document.visibilityState;const a=this.getIframe(e);let i,o,r=this.isElementInDOM(a);const s=this.adMap&&this.adMap[e]&&this.adMap[e].options;!n&&s&&pe(s.slot,s.placementId,le.PAGE_PRERENDER,1),!r&&s&&pe(s.slot,s.placementId,le.AD_MISSING,1);const d=()=>!(!n||!r)&&(t(),o&&document.removeEventListener("visibilitychange",o),i&&ke()&&i.unobserve(a),!0);if(!d()){const e={root:document.documentElement};ke()&&(i=new IntersectionObserver((e=>{try{if(1===e.length){e[0].isIntersecting?(r=!0,d()):r=!1}}catch(e){Ce("Error executing intersectionObserver callback")}}),e),i.observe(a)),o=()=>{try{"prerender"!==document.visibilityState?(n=!0,d()):n=!1}catch(e){Ce("Error executing pageVisibilityHandler callback")}},document.addEventListener("visibilitychange",o)}})),o(this,"updateViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||xe(t)||!n||xe(n))return;const a=this.getIframe(e),i=t[e].options.viewabilityStandards,o=H(a);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),o(this,"updateNoInventoryViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options,a=n&&n.slotSnapshot;if(!t||xe(t)||!n||xe(n)||!a)return;const i=n.viewabilityStandards,o=z(a);null!==o&&(o.viewabilityStandards=i,this.sendMessageToAd(e,"updateViewability",o))})),this.adMap=e||{},this.supportedCommands=t||{},this.msgListeners=n||{}}},Ke="unfired_cod_impressions_dictionary";function Xe(){let e;try{e=JSON.parse(localStorage.getItem(Ke)||"{}")}catch(t){e={}}return e}function $e(){try{localStorage.removeItem(Ke)}catch(e){}}function Ze(e,t){const n=Xe();n[e]=t,nt(n)}function et(){const e=Xe(),t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&t.push(e[n]);return $e(),t}function tt(e){const t=Xe();t[e]&&(t[e]="",nt(t))}function nt(e){try{localStorage.setItem(Ke,JSON.stringify(e))}catch(e){}}var at,it,ot,rt,st,dt;(it=at||(at={})).IMPRESSION="localstorage:impression",it.ERROR="localstorage:error",it.CONTROL="localstorage:inactive",it.TREATMENT="localstorage:t1",it.NO_WEBLAB="localtestorage:missing",(rt=ot||(ot={})).IMPRESSION="localstorage_impression",rt.ERROR="localstorage_error",rt.CONTROL="localstorage_inactive",dt=function(){return URL};var lt="{}",ct="?",ut="&",pt="=";function mt(e,t){var n={};for(var a in e)n[a]=e[a];for(var i in t)n[i]=t[i];return n}st=function(e,t,n){if("string"!=typeof e||""===e)throw new Error("Invalid url input to addJSONQueryParamToURL: "+JSON.stringify({url:e}));if("string"!=typeof t||""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));if("object"!=typeof n)throw new Error("Invalid queryParamValueObject input to addJSONQueryParamToURL: "+JSON.stringify({queryParamValueObject:n}));try{var a=new(dt())(e),i=a.searchParams.get(t)?a.searchParams.get(t):"{}",o=JSON.parse(i);if("object"!=typeof o)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:o}));var r=mt(o,n);return a.searchParams.set(t,JSON.stringify(r)),a.toString()}catch(a){return function(e,t,n){var a,i=e.indexOf(ct),o={};if(i>0){a=e.substring(0,i),decodeURIComponent(e.substring(i+1)).split(ut).forEach((function(e){if(e){var t=e.split(pt);o[t[0]]=t[1]}}));var r=o[t]?o[t]:lt,s=JSON.parse(r);if("object"!=typeof s)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:s}));var d=mt(s,n);o[t]=JSON.stringify(d)}else a=e,o[t]=JSON.stringify(n);var l=[];for(var c in o)l.push(encodeURIComponent(c)+pt+encodeURIComponent(o[c]));return a+ct+l.join(ut)}(e,t,n)}};const ht=(e,t)=>{const n=!(!e.options.expParams||!e.options.expParams.enableViewabilityTrackerOnLoad)&&JSON.parse(e.options.expParams.enableViewabilityTrackerOnLoad),a=()=>{try{tt(e.options.arid),Ye.sendMessageToAd(e.options.arid,"fireImpression",t),ft(!n,e,t)}catch(e){Ce("Error firing pixels. data: "+JSON.stringify(t))}};ft(n,e,t);const i=w((()=>{Ye.startPixelTracking(e.options.arid,a)}));qe(e.options.firePixelsAfter,i,0,e.slot,e.options.expParams?e.options.expParams.firePositionTrackerOnLoad:"false")},ft=(e,t,n)=>{e&&(n.isNoInventory?Ye.supportedCommands.enableNoInventoryViewabilityTrackerAndInvokeFallback(t):Ye.supportedCommands.enableViewabilityTracker(t))};function wt(e){Ye.startPixelTracking(e.options.arid,(()=>{try{if(e.options.aaxImpPixelUrl){const t=st(e.options.aaxImpPixelUrl,"pj",{measurementMethod:"cod_client"});Ze(e.options.arid,t)}Ye.sendMessageToAd(e.options.arid,"fireMetricsForLegacyImpression",{})}catch(e){Ce("Error firing legacy impression metrics")}}))}const gt={sd:1},vt=["name","entryType","startTime","duration","initiatorType","nextHopProtocol","workerStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize"];class Et{log(){if(!(window.ue&&window.ue.event&&window.ue.attach))return pe(null,null,re.DEPENDENCIES_NOT_MET,1),void Ee(_.DEPENDENCIES_NOT_MET,this.options.slot,this.options.placementId);pe(null,null,re.DEPENDENCIES_NOT_MET,0),Ee(_.DEPENDENCIES_MET,this.options.slot,this.options.placementId),"complete"===document.readyState?this.logMessage():window.ue.attach("load",this.logMessage)}extractResourceProperties(e){let t={};const n={};for(let a=0;a<vt.length;a++)t=vt[a],void 0!==e[t]&&(n[t]=e[t]);return n}getPageInfo(){return{source:"safeframe",pageType:window.ue_pty||null,subPageType:window.ue_spty||null,pageTypeId:this.getPageTypeIdKey()||null}}getPageTypeIdKey(){return this.options.slot+"_"+this.options.adCreativeMetaData.adNetwork+"_"+this.options.adCreativeMetaData.adProgramId+"_"+this.options.adCreativeMetaData.adCreativeId+"_"+this.options.adCreativeMetaData.adId}getResources(){const e=[];for(let t=0;t<this.data.resourceTimingData.length;t++){const n=this.data.resourceTimingData[t];0!==n.responseEnd&&e.push(this.extractResourceProperties(n))}return e}composeMessage(){const e=this.getPageInfo();return e.resourceData=this.getResources(),e}logMessage(){const e=this.composeMessage();let t=!1;window.ue.event&&(t=window.ue.event(e,"adplacements","csm.ResourceTimingHit.2",gt),t?(pe(null,null,re.LOGGING_SUCCESSFUL,1),pe(null,null,re.LOGGING_FAILED,0),Ee(_.LOGGING_SUCCESSFUL,this.options.slot,this.options.placementId)):(pe(null,null,re.LOGGING_SUCCESSFUL,0),pe(null,null,re.LOGGING_FAILED,1),Ee(_.LOGGING_FAILED,this.options.slot,this.options.placementId)))}constructor(e,t){o(this,"options",void 0),o(this,"data",void 0),this.options=e,this.data=t}}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}function St(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var yt,It;(It=yt||(yt={})).BEGIN_TO_RENDER_CLIENT="btr_client",It.COUNT_ON_DOWNLOAD_CLIENT="cod_client";const Tt=(e,t,n,a,i)=>{const o=document.createElement("img");o.id=t,o.src=e,o.style.display="none",o.onload=a,o.onerror=i,n.appendChild(o)};var Rt,At,Dt,_t;!function(e){e.IFRAME_INIT="adload:iframeinitialized",e.RENDER_START="adload:renderstart",e.RENDER_END="adload:renderend",e.CREATIVE_WRITTEN="adload:creativewritten",e.IMP="adload:impression",e.UNSERVED_IMP="adload:unservedimpression",e.VIEWABILITY="adload:viewability",e.UNSERVED_VIEWABILITY="adload:unservedviewability",e.MEASURABILITY="adload:measurability",e.MEASUREMENT_HTML="adload:measurementhtml"}(Rt||(Rt={})),(Dt=At||(At={})).REQUEST_START="adfetch:request",Dt.PUNT_RETURNED="adfetch:punt",Dt.ERROR_RETURNED="adfetch:error",Dt.EMPTY_RESPONSE="adfetch:noad",Dt.RENDERED_AD="adfetch:renderad",Dt.RENDER_ERROR="adfetch:rendererror",Dt.HTTP_ERROR="adfetch:httperror",Dt.EXCEPTION="adfetch:exception",function(e){e.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet"}(_t||(_t={}));var Ot,Lt,Ct,Nt;function Mt(e,t,n,a,i,o){if("undefined"==typeof performance||void 0===performance.getEntriesByType)return;const r=performance.getEntriesByType("resource");if(void 0===r||!Array.isArray(r)||r.length<1||void 0===r[0].duration)return;const s=e=>{i(n,a,e,1)},d=void 0!==r[0].transferSize?(e,t,i)=>{0===e.transferSize?(s(t+"cached"),o(i+"cached",n,a)):(s(t+"uncached"),o(i+"uncached",n,a))}:(e,t,i)=>{e.duration<20?(s(t+"fastload"),o(i+"fastload",n,a)):(s(t+"slowload"),o(i+"slowload",n,a))},l=(e,t,n)=>{if(e)for(let a=0;a<r.length;a++){const i=r[a];if(i.name&&-1!==i.name.indexOf(e))return void d(i,t,n)}};l(e,te.SF_LIBRARY,T.SF_LIBRARY),l(t,te.SF_HTML,T.SF_HTML)}(Lt=Ot||(Ot={})).LEGACY_IMPRESSION_COUNTER="imp:legacy",Lt.GLOBAL_IMPRESSION_FIRED_COUNTER="impressionFired",(Nt=Ct||(Ct={})).LOADED="btr:loaded",Nt.ERROR="btr:error",Nt.IMPRESSION="btr:impression",Nt.NO_IMAGES="btr:noimages",Nt.TAGGED="btr:taggedcreative";const Pt=e=>e+"_Feedback";var kt,xt;(xt=kt||(kt={}))[xt.BOTTOM=0]="BOTTOM",xt[xt.TOP=1]="TOP";class Ft{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);const n=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);return(null==n?void 0:n.isOk())?(e.updateElement(this.getHtmlId(),n),n):null}getHtmlId(){return Pt(this.parentHtmlId)}isHidden(){return this.hidden}constructor(e,t,n,a,i,r,s){o(this,"parentHtmlId",void 0),o(this,"feedbackStyle",void 0),o(this,"labelText",void 0),o(this,"labelStyle",void 0),o(this,"position",void 0),o(this,"urlPathAndParameter",void 0),o(this,"hidden",void 0),this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=n,this.labelStyle=a,this.position=i,this.urlPathAndParameter=r,this.hidden=s}}class Ht{open(e){e.clickChildLink(this)}getHtmlId(){return Pt(this.parentHtmlId)}constructor(e){o(this,"parentHtmlId",void 0),this.parentHtmlId=e}}class Bt{createSponsoredLabelWithFeedbackLink(e,t){t.request(),e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort).then((n=>{t.success(n),e.isHidden()||t.labelRenderedHost()})).catch((()=>{t.error()}))}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}constructor(e,t){o(this,"feedbackHtmlPort",void 0),o(this,"feedbackApiPort",void 0),this.feedbackHtmlPort=e,this.feedbackApiPort=t}}class zt{logFeedbackRequest(){jt(this.tracer,this.tracerFeedback.feedbackRequest)}logFeedbackResponse(e,t){jt(this.tracer,this.tracerFeedback.feedbackResponse(t,e))}logRenderSponsoredLabel(){jt(this.tracer,this.tracerFeedback.renderSponsoredLabel)}constructor(e,t){o(this,"tracer",void 0),o(this,"tracerFeedback",void 0),this.tracer=e,this.tracerFeedback=t}}const jt=(e,t)=>{e.logTrace("adFeedBack",t)};var Ut,Vt;(Vt=Ut||(Ut={})).REQUEST="adfeedback:request",Vt.SUCCESS="adfeedback:success",Vt.ERROR="adfeedback:error",Vt.LABEL_RENDERED_CREATIVE="adfeedback:sponsoredlabelrendered:creative",Vt.LABEL_RENDERED_HOST="adfeedback:sponsoredlabelrendered:host";class Wt{incrementRequest(){Gt(Ut.REQUEST,this.placementId,this.placementName)}incrementSuccess(){Gt(Ut.SUCCESS,this.placementId,this.placementName)}incrementError(){Gt(Ut.ERROR,this.placementId,this.placementName)}incrementLabelRenderedHost(){Gt(Ut.LABEL_RENDERED_HOST,this.placementId,this.placementName)}incrementLabelRenderedCreative(){Gt(Ut.LABEL_RENDERED_CREATIVE,this.placementId,this.placementName)}constructor(e,t){o(this,"placementName",void 0),o(this,"placementId",void 0),this.placementName=e,this.placementId=t}}const Gt=(e,t,n)=>{pe(n,t,e,1)};var Jt={},qt=Jt&&Jt.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),Qt=Jt&&Jt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Yt=Jt&&Jt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&qt(t,e,n);return Qt(t,e),t};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.AD_LOAD_COUNTERS=Jt.csa=Jt.csm=void 0;var Kt=Yt(i("a1rh1"));Jt.csm=Kt;var Xt=Yt(i("iMV0g"));Jt.csa=Xt;var $t,Zt,en={};Object.defineProperty(en,"__esModule",{value:!0}),en.AD_LOAD_COUNTERS=void 0,en.AD_LOAD_COUNTERS={HTML_REACHED:"adload:htmlreached"},Object.defineProperty(Jt,"AD_LOAD_COUNTERS",{enumerable:!0,get:function(){return en.AD_LOAD_COUNTERS}}),(Zt=$t||($t={})).REQUEST="adfeedback_request",Zt.SUCCESS="adfeedback_success",Zt.ERROR="adfeedback_error",Zt.LABEL_RENDERED_CREATIVE="adfeedback_sponsoredlabelrendered_creative",Zt.LABEL_RENDERED_HOST="adfeedback_sponsoredlabelrendered_host";class tn{logRequest(){Jt.csa.events().log($t.REQUEST,this.placementName,this.placementId)}logSuccess(){Jt.csa.events().log($t.SUCCESS,this.placementName,this.placementId)}logError(){Jt.csa.events().log($t.ERROR,this.placementName,this.placementId)}logLabelRenderedCreative(){Jt.csa.events().log($t.LABEL_RENDERED_CREATIVE,this.placementName,this.placementId)}logLabelRenderedHost(){Jt.csa.events().log($t.LABEL_RENDERED_HOST,this.placementName,this.placementId)}constructor(e,t){o(this,"placementName",void 0),o(this,"placementId",void 0),this.placementName=e,this.placementId=t}}const nn=(e,t,n)=>new an(new Wt(e,t),new tn(e,t),n?new zt(n.instance,n.tracerFeedback):void 0);class an{request(){var e;this.sendCsmCounterService.incrementRequest(),this.logCsaEventService.logRequest(),null===(e=this.tracerService)||void 0===e||e.logFeedbackRequest()}success(e){var t;this.sendCsmCounterService.incrementSuccess(),this.logCsaEventService.logSuccess(),null===(t=this.tracerService)||void 0===t||t.logFeedbackResponse(!0,e)}error(){var e;this.sendCsmCounterService.incrementError(),this.logCsaEventService.logError(),null===(e=this.tracerService)||void 0===e||e.logFeedbackResponse(!1)}labelRenderedCreative(){this.sendCsmCounterService.incrementLabelRenderedCreative(),this.logCsaEventService.logLabelRenderedCreative()}labelRenderedHost(){var e;this.sendCsmCounterService.incrementLabelRenderedHost(),this.logCsaEventService.logLabelRenderedHost(),null===(e=this.tracerService)||void 0===e||e.logRenderSponsoredLabel()}constructor(e,t,n){o(this,"sendCsmCounterService",void 0),o(this,"logCsaEventService",void 0),o(this,"tracerService",void 0),this.sendCsmCounterService=e,this.logCsaEventService=t,this.tracerService=n}}class on{isOk(){return"ok"===this.status}constructor(e,t,n){o(this,"status",void 0),o(this,"html",void 0),o(this,"script",void 0),this.status=e,this.html=t,this.script=n}}class rn{async getSponsoredLabelAndFeedbackLink(e){return fetch(this.windowRepo.origin()+e).then((e=>e.ok?e.json().then((e=>Promise.resolve(new on(e.status,e.html,e.script)))):Promise.reject(null))).catch((()=>Promise.reject(null)))}constructor(e){o(this,"windowRepo",void 0),this.windowRepo=e}}class sn{appendChildTo(e,t){var n,a;function i(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),n(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,n(t,e.labelStyle),t}(e)),t;function n(e,t){for(const n in t)e.style.setProperty(n,t[n])}}t.position===kt.TOP?null===(n=dn(e))||void 0===n||n.prepend(i(t)):t.position===kt.BOTTOM&&(null===(a=dn(e))||void 0===a||a.append(i(t)))}updateElement(e,t){const n=dn(e);n&&(n.innerHTML=t.html,function(e,t){(function(e){const t=document.createElement("script");return e.prepend(t),t}(e)).innerHTML=t.script}(n,t))}clickChildLink(e){const t=document.getElementById(e.getHtmlId());var n;if(t)for(const e of t.children)if("A"===(n=e).tagName||"DIV"===n.tagName)return void e.click()}}const dn=e=>document.getElementById(e);class ln{get feedbackRequest(){return{adFeedbackRequest:{slot:this.placementName,placementId:this.placementId,endPoint:this.endpoint,feedbackDivStyle:this.feedbackDivStyle,requestUrl:this.endpoint}}}feedbackResponse(e,t){return{adFeedBackResponse:{feedbackResponseStarted:!0,feedBackResponseReturned:t,response:e}}}get renderSponsoredLabel(){return{renderSponsoredLabel:!0}}constructor(e,t,n,a){o(this,"placementName",void 0),o(this,"placementId",void 0),o(this,"endpoint",void 0),o(this,"feedbackDivStyle",void 0),this.placementName=e,this.placementId=t,this.endpoint=n,this.feedbackDivStyle=a}}const cn=()=>new un(new Bt(new sn,new rn({origin:()=>window.location.origin})));class un{postSponsoredLabelWithFeedbackLink({parentHtmlId:e,placement:t,feedback:n,tracer:a}){n.hidden&&(n.style=St(bt({},n.style),{display:"none"}),n.label.style=St(bt({},n.label.style),{display:"none"})),this.feedbackService.createSponsoredLabelWithFeedbackLink(function(e,t){return new Ft(e,t.style,t.label.text,t.label.style,"TOP"===t.position?kt.TOP:kt.BOTTOM,mn(t.url.path,t.url.parameters),t.hidden)}(e,n),nn(t.name,t.id,pn(a,t,n)))}openModal(e){this.feedbackService.openModal(new Ht(e))}labelRendered({placement:e}){this.feedbackService.labelRendered(nn(e.name,e.id))}constructor(e){o(this,"feedbackService",void 0),this.feedbackService=e}}const pn=(e,t,n)=>e?{instance:e,tracerFeedback:new ln(t.name,t.id,mn(n.url.path,n.url.parameters),n.style)}:void 0,mn=(e,t)=>e+"?pl="+t,hn=(e,t)=>{const n=(e,t)=>{var n,a;return null!==(a=null===(n=document.getElementById(e))||void 0===n?void 0:n.getAttribute(t))&&void 0!==a?a:null},a=n("ilmRelocatedHtml","data-relocated-html");a?Ye.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",a):document.addEventListener("sendRelocatedHtmlContentEncodedToAd",(a=>{const i=n("ilmRelocatedHtml","data-relocated-html");i?Ye.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",i):t()}),{once:!0})},fn=(e,t)=>{let n;try{n=st(e,"pj",{measurementMethod:yt.COUNT_ON_DOWNLOAD_CLIENT})}catch(e){return Ce("Unable to add pj to impression URL",e),pe(null,null,at.ERROR,1),void Ee(ot.ERROR)}Tt(n,"ape_impression",t,(()=>{pe(null,null,at.IMPRESSION+"loaded",1),Ee(ot.IMPRESSION+"loaded")}),(()=>{pe(null,null,at.IMPRESSION+"error",1),Ee(ot.IMPRESSION+"error")})),pe(null,null,Ot.GLOBAL_IMPRESSION_FIRED_COUNTER,1)},wn=(e,t,n,a,i,o)=>{try{var r,s;const d=document.getElementById(a[e.arid].placementDivId),l=a[e.arid].iframeId;let c=null;const u=null===window||void 0===window||null===(r=window.renderingWeblabs)||void 0===r||null===(s=r.ADPT_SF_CLIENT_LATENCY_2023Q1_632539)||void 0===s?void 0:s.toLowerCase(),p=E(e.mediaType,e.adCreativeMetaData.adProgramId);c="t1"!==u&&"t3"!==u||p?je(e,l,t):ze(e,l,n);const m=o?e.MAsfUrl:e.DAsfUrl;c.onload=()=>{Mt(m,t,e.slot,e.placementId,pe,Ee)},d.appendChild(c),ye().sendLatencyMetric({latencyMetricType:_e,placementId:e.placementId,placementName:e.slot}),pe(e.slot,e.placementId,Z.IFRAME_CREATED,1),Ee(y.IFRAME_CREATED,e.slot,e.placementId),Ye.adMap[e.arid]={slot:d,iframe:c,options:e};const h={id:c.id,src:c.src,scrolling:c.scrolling,height:c.height,width:c.width,className:c.className,styleCssText:c.style.cssText,sandbox:c.sandbox};i[e.arid].logTrace("createSafeFrame",h)}catch(t){Ce("Error creating safeFrame",t),i[e.arid]&&i[e.arid].logTrace("createSafeFrame",{error:{message:"errorCreatingSafeFrame",ex:t}})}},gn=e=>{cn().labelRendered({placement:{name:e.options.slot,id:e.options.placementId}})},vn=e=>{cn().openModal(e.options.adPlacementMetaData.adElementId)},En=(e,t)=>{ye().sendLatencyMetric(St(bt({},t),{placementName:e.options.slot,placementId:e.options.placementId}))};const bn=new class{addAdHandler(e,t,n,a){this.ADS_HANDLERS[e]=this.ADS_HANDLERS[e]||{},this.ADS_HANDLERS[e][n]=w(a,Ce,"Error within ad handler "+n+": "+t)}constructor(e){o(this,"ADS_HANDLERS",{}),o(this,"AD_IDS",{}),o(this,"AD_TRACERS",{}),o(this,"buildTimeReplacements",void 0),o(this,"supportedCommands",{sendAdBarTrace:(e,t)=>{e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},logAPIInvocation:(e,t)=>{pe(null,null,ae.API+t.apiName,1),pe(e.options.slot,e.options.placementId,ae.API+t.apiName,1),e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},resizeSafeFrameAd:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),We(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,Ye,this.AD_IDS)},setResizePlacementStyle:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),Ve(e.options.arid,this.AD_IDS,e.options.resizePlacementStyle)},changeSize:(e,t)=>{const n=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||e.options.allowChangeSize)if(Pe(t,n,Me))e.slot.style.width=t.width,e.iframe.height=t.height,e.iframe.width=t.width;else{Ce("Size is not allowlisted: "+t.width+" x "+t.height+Ye.appendErrorDetails(e.options.arid))}},startPixelTracking:ht,startPixelTrackingForLegacyImpression:wt,collapseSlot:e=>{Ue(this.AD_IDS[e.options.arid].placementDivId),Ue(this.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&qe("amznJQ.available:navbarJSLoaded",(()=>{void 0!==parent.navbar&&"function"==typeof parent.navbar.unHideSWM&&parent.navbar.unHideSWM()}))},logError:(e,t)=>{Ce(t.message+Ye.appendErrorDetails(e.options.arid)+": "+e.options.slot,t.error)},logCsaEvent:(e,t)=>{Ee(t.metricName,e.options.slot,e.options.placementId)},addCsaEntity:(e,t)=>{be(t)},sendLatencyMetric:(e,t)=>En(e,t),countMetric:(e,t)=>{t.isGlobal?pe(null,null,t.metricMsg,t.value):pe(e.options.slot,e.options.placementId,t.metricMsg,t.value)},addCsmTag:(e,t)=>{t.isGlobal?me(t.tag,null,null,t.msg):me(t.tag,e.options.slot,e.options.placementId,t.msg)},fireViewableLatencyMetrics:(e,t)=>{var n,a,i,o;n=e.options.arid,a=e.options.slot,i=e.options.placementId,o=t.adLoadedTimestamp,window.apeViewableLatencyTrackers&&window.apeViewableLatencyTrackers[n]&&window.apeViewableLatencyTrackers[n].valid&&(window.apeViewableLatencyTrackers[n].loaded=!0,window.apeViewableLatencyTrackers[n].viewed&&(ye().sendLatencyMetric({latencyMetricType:Oe,placementId:i,placementName:a,timestamp:new Date(o)}),pe(a,i,"htmlviewed:loaded",1)))},customMessage:(e,t)=>{Ye.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},enableViewabilityTracker:e=>{Ye.updateViewability(e.options.arid);const t=fe(20,Ye.updateViewability);if(this.addAdHandler(e.options.arid,e.options.slot,"viewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),ke()){new IntersectionObserver((()=>{Ye.updateViewability(e.options.arid)}),{threshold:[0,.5,1]}).observe(e.slot)}},enableNoInventoryViewabilityTrackerAndInvokeFallback:e=>{Ye.takeSnapshotOfSlotPosition(e.options.arid),Ye.updateNoInventoryViewability(e.options.arid),Ye.sendMessageToAd(e.options.arid,"handleFallbackBehavior",{});const t=fe(20,Ye.updateNoInventoryViewability);this.addAdHandler(e.options.arid,e.options.slot,"noInventoryViewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker)},safeFrameReady:e=>{var t;(null===(t=e.options.expParams)||void 0===t?void 0:t.ilmRelocatedHtmlIsActive)&&!e.options.htmlContentEncoded&&hn(e.options.arid,(()=>{Ue(this.AD_IDS[e.options.arid].placementDivId)}))},requestVideoAutoplay:(e,t)=>{K(e,t,Ye)},releaseVideoAutoplay:()=>{X()},haveVideoAutoplayPermission:e=>{$(e)},logSafeframeResourceTimingData:(e,t)=>{new Et(e,t).log()},saveAdDetailsForAdReporter:(e,t)=>{if(!window.adReporterConfig)return;window.adReporterDetails||(window.adReporterDetails={});const n=e.options.slotName;t&&n===t.slotName?window.adReporterDetails[n]=t:window.adReporterDetails[n]||(window.adReporterDetails[n]=JSON.stringify(e))},feedbackLabelRendered:e=>gn(e),feedbackOpenModal:e=>vn(e)}),o(this,"initSafeFrame",(()=>{if(window.DAsf&&window.DAsf.loadAds)return void window.DAsf.loadAds();var e,t,n,a;window.DAsf={version:this.buildTimeReplacements.version},"t1"===(null===window||void 0===window||null===(e=window.renderingWeblabs)||void 0===e||null===(t=e.ADPT_SF_MRC_RETEST_643771)||void 0===t?void 0:t.toLowerCase())?(pe(null,null,at.TREATMENT,1),et().forEach((e=>{try{fn(e,document.body),pe(null,null,at.IMPRESSION,1),Ee(ot.IMPRESSION)}catch(e){pe(null,null,at.ERROR,1),Ee(ot.ERROR)}}))):"c"===(null===window||void 0===window||null===(n=window.renderingWeblabs)||void 0===n||null===(a=n.ADPT_SF_MRC_RETEST_643771)||void 0===a?void 0:a.toLowerCase())?pe(null,null,at.CONTROL,1):(pe(null,null,at.NO_WEBLAB,1),$e()),window.csa&&(we.events=window.csa("Events",{producerId:"adplacements"})),pe(null,null,oe.VERSION+":"+window.DAsf.version,1),Ee(D.VERSION+window.DAsf.version),window.addEventListener("message",Ye.receiveMessage,!1),Ye.supportedCommands=this.supportedCommands,window.DAsf.registerCustomMessageListener=Ye.registerCustomMessageListener,window.DAsf.sendCustomMessage=Ye.sendCustomMessage;window.DAsf.loadAds=()=>{const e="data-arid",t=(e,t)=>{this.AD_IDS[e]={slotId:t,placementDivId:"ape_"+t+"_placement",iframeId:"ape_"+t+"_iframe",auiCardDeckId:"ape_"+t+"_aui_cardDeck"}},n=e=>{const t={};try{const n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const i=n[a].split("="),o=i[0];i.length>1&&e.indexOf(o)>-1&&(t[o]=i[1])}}catch(e){Ce("Error parsing query parameters",e)}return t},a=e=>()=>{We(e.arid,e.size.width,e.size.height,e.maxAdWidth,Ye,this.AD_IDS)},i=e=>()=>{Ve(e.arid,this.AD_IDS,e.resizePlacementStyle)},o=t=>{const n=()=>{var e;return null===(e=null==Ye?void 0:Ye.adMap[t.arid])||void 0===e?void 0:e.iframe};return w((()=>{const a={callbackOccurred:!0};a.loadAfter=t.loadAfter,this.AD_TRACERS[t.arid].logTrace("pageCallBack",a),pe(t.slot,t.placementId,Z.CALLBACK,1),Ee(y.CALLBACK,t.slot,t.placementId);var i,o;((t,n)=>{if(!t)return!1;const a=document.getElementById(t);if(a&&!a.innerHTML){const t=a.getAttribute(e);if(t&&t===n.arid)return!0}return!1})(this.AD_IDS[t.arid].placementDivId,t)&&(wn(t,t.safeFrameSrc,this.buildTimeReplacements.desktopSafeFrameClientHtmlContentEncoded,this.AD_IDS,this.AD_TRACERS,!1),n()&&(i=t,o=this.AD_TRACERS[t.arid],cn().postSponsoredLabelWithFeedbackLink({parentHtmlId:i.adPlacementMetaData.adElementId,placement:{id:i.placementId,name:i.slot},feedback:{position:i.adFeedbackInfo.adFeedbackOnTop?"TOP":"BOTTOM",hidden:1==!i.adFeedbackInfo.boolFeedback,style:i.feedbackDivStyle,url:{path:i.adFeedbackInfo.endPoint,parameters:encodeURIComponent(JSON.stringify({adPlacementMetaData:i.adPlacementMetaData,adCreativeMetaData:i.adCreativeMetaData}))},label:{text:S(i.adFeedbackInfo.sponsoredText),style:i.advertisementStyle}},tracer:o})))}),Ce,"Error in callback to create Safeframe.")},r="text/x-dacx-safeframe";let d=document.getElementsByClassName(r);0===d.length&&(d=document.getElementsByTagName("script"));for(const l of d)if("DIV"===l.tagName&&l.classList.contains(r)||l.getAttribute("type")===r)try{const r=L(l.getAttribute("data-csa-c-slot-id")),d=r||JSON.parse(l.getAttribute("data-ad-details")||l.text||l.innerHTML||l.innerText);C(d);const c="ape_"+d.slot+"_placement",u=document.getElementById(c);!Ye.adMap[d.arid]&&u&&u.innerHTML&&(u.innerHTML="",l.removeAttribute(e));if(l.getAttribute(e))continue;d.arid=d.arid||Math.random().toString(16).slice(2),this.AD_TRACERS[d.arid]=new s(d.traceId,window[d.slotName]&&window[d.slotName].adStartTime||0),this.AD_TRACERS[d.arid].logTrace("safeFrameInput",d);const p={caches:window.caches?window.caches:null,plugins:document.plugins?document.plugins:null,cookies:document.cookie?document.cookie:null,userAgents:navigator.userAgent?navigator.userAgent:null};this.AD_TRACERS[d.arid].logTrace("browserData",p),l.setAttribute(e,d.arid),d.hostDomain=location.protocol+"//"+location.host,d.allowedSizes="object"==typeof d.allowedSizes&&d.allowedSizes.length>=0?d.allowedSizes.concat(d.size):[d.size];const m="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");if(d.allowedDomains="object"==typeof d.allowedDomains&&d.allowedDomains.length>=0?d.allowedDomains.concat(m):m,d.queryParams=n(d.allowlistedQueryParamKeys),d.aPageStart=window.aPageStart,d.adStartTime=window[d.slotName]&&window[d.slotName].adStartTime||0,this.addAdHandler(d.arid,d.slot,"defaultResizeSafeFrameHandler",a(d)),this.addAdHandler(d.arid,d.slot,"defaultSetResizePlacementStyle",i(d)),t(d.arid,d.slot),"clickTracking"in d&&""===d.clickTracking&&(d.clickTracking=h(d)),d.forcePunt){me("forcePunt",d.slot,d.placementId),be({forcePunt:"true"}),Ue(this.AD_IDS[d.arid].placementDivId);continue}const f=Ne(),w="true"===d.abpAcceptable&&("1"===d.abpStatus||"-1"===d.abpStatus);if(E(d.mediaType,d.adCreativeMetaData.adProgramId)){const e=f+this.buildTimeReplacements.desktopSafeFrameVideoPath,t=f+this.buildTimeReplacements.allowlistedSafeFrameVideoPath;d.safeFrameSrc=w?t:e}else{const e=f+this.buildTimeReplacements.desktopSafeFramePath,t=f+this.buildTimeReplacements.allowlistedSafeFramePath;d.safeFrameSrc=w?t:e}if(d.abpStatus){me("ABPStatus"+b[d.abpStatus],d.slot),be({ABPStatus:b[d.abpStatus]});for(const e in b)pe(d.slot,d.placementId,ie[e],d.abpStatus===e?1:0),d.abpStatus===e&&Ee(A[e],d.slot,d.placementId)}d.collectSafeframeRTD=window.collectSafeframeRTD,ye().sendLatencyMetric({latencyMetricType:De,placementId:d.placementId,placementName:d.slot}),ye().sendLatencyMetric({latencyMetricType:Ae,placementId:d.placementId,placementName:d.slot}),pe(d.slot,d.placementId,Z.START,1),Ee(y.START,d.slot,d.placementId);const g={hostDomain:d.hostDomain,allowedSizes:d.allowedSizes,allowedDomains:d.allowedDomains,queryParams:d.queryParams,aPageStart:d.aPageStart,adStartTime:d.adStartTime,safeFrameSrc:d.safeFrameSrc,abpStatus:d.abpStatus};qe(d.loadAfter,o(d),0,l),g.loadAfter=d.loadAfter,this.AD_TRACERS[d.arid].logTrace("additionalInitilizationParams",g)}catch(e){Ce("Error parsing sf tag",e)}},window.DAsf.loadAds()})),this.buildTimeReplacements=e}}({version:"ad-placements-todworker-corp-2c-df66168a.us-west-2.amazon.com",desktopSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.1b400db.html",allowlistedSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.1b400db.html",desktopSafeFramePath:"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.1b400db.html",allowlistedSafeFramePath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.1b400db.html",desktopSafeFrameClientHtmlContentEncoded:"~~desktopSafeFrameClientHtmlContentEncoded~~"});w((()=>bn.initSafeFrame()),Ce,"Error initializing safeFrame")()}();
//# sourceMappingURL=DAsf.min.js.map
